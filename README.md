# Overview

A project of a landing page for a private person. The goal was to create a page where user can add and show personal projects as a form of a business portfolio.

Live:

[murawska.studio](https://www.murawska.studio/)

Lastest audit:

[insights.murawska.studio](https://www.insights.murawska.studio/)

## Tools & Technologies

[<img
    height="48"
    width="48"
    src="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/git/git-original.svg"
    alt="Git"
  />](https://git-scm.com/)
[<img
    height="48"
    width="48"
    src="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/javascript/javascript-plain.svg"
    alt="JavaScript"
  />](https://developer.mozilla.org/en-US/docs/Web/JavaScript)
[<img
    height="48"
    width="48"
    src="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/react/react-original.svg"
    alt="React"
  />](https://react.dev/)
[<img
    height="48"
    width="48"
    src="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/nextjs/nextjs-plain.svg"
    alt="Next.js"
  />](https://nextjs.org/)
[<img
    height="48"
    width="48"
    src="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/sanity/sanity-plain.svg"
    alt="Sanity"
  />](https://www.sanity.io/)
[<img
    height="48"
    width="48"
    src="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/sass/sass-original.svg"
    alt="Sass"
  />](https://sass-lang.com/)

<details>
  <summary>Others</summary>
  <table>
    <thead>
      <tr>
        <th></th>
        <th>Tool</th>
        <th>Used for</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>
          <a href="https://github.com/" target="_blank">
            <img
              height="32"
              width="32"
              src="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/github/github-original.svg"
              alt="GitHub"
            />
          </a>
        </td>
        <td>GitHub</td>
        <td>project management and maintenance, CI/CD</td>
      </tr>
      <tr>
        <td>
          <a href="https://unlighthouse.dev/" target="_blank">
            <img
              height="32"
              width="32"
              src="https://unlighthouse.dev/logo-light.svg"
              alt="Unlighthouse"
            />
          </a>
        </td>
        <td>Unlighthouse</td>
        <td>quality assurance</td>
      </tr>
      <tr>
        <td>
          <a href="https://www.figma.com/" target="_blank">
            <img
              height="32"
              width="32"
              src="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/figma/figma-original.svg"
              alt="Figma"
            />
          </a>
        </td>
        <td>Figma</td>
        <td>
          design, assets, prototyping, wireframing
          <details>
            <ul>
              <li>
                <a target="_blank" href="https://www.figma.com/file/T9dJa9ck29CvkLH5yA1CcU/kor-mur-Wireframes?node-id=35%3A477&t=3LtvFHsMaSQbzBul-1">
                  Mobile Wireframe
                </a>
              </li>
              <li>
                <a href="https://www.figma.com/proto/T9dJa9ck29CvkLH5yA1CcU/kor-mur-Wireframes?node-id=1-2&scaling=scale-down&page-id=0%3A1&starting-point-node-id=1%3A2">
                  Mobile Prototype
                </a>
              </li>
              <li>
                <a target="_blank" href="https://www.figma.com/proto/T9dJa9ck29CvkLH5yA1CcU/kor-mur-Wireframes?node-id=123-1028&scaling=scale-down&page-id=123%3A908&starting-point-node-id=123%3A1028">
                  Tablet Prototype
                </a>
              </li>
              <li>
                <a target="_blank" href="https://www.figma.com/file/T9dJa9ck29CvkLH5yA1CcU/kor-mur-Wireframes?node-id=123%3A910&t=3LtvFHsMaSQbzBul-1">
                  Tablet Wireframe
                </a>
              </li>
              <li>
                <a target="_blank" href="https://www.figma.com/design/T9dJa9ck29CvkLH5yA1CcU/kor-mur-wireframes?node-id=165%3A570&t=3g16CT5J7dtwYLNs-1">
                  Desktop Wireframe
                </a>
              </li>
              <li>
                <a target="_blank" href="https://www.figma.com/proto/T9dJa9ck29CvkLH5yA1CcU/kor-mur-wireframes?node-id=165-689&t=6Ol4xmG1IZFvpA83-1&scaling=scale-down&page-id=123%3A909&starting-point-node-id=165%3A689">
                  Desktop Prototype
                </a>
              </li>
              <li>
                <a target="_blank" href="https://www.figma.com/file/7MlMZr0CoRwcLto6aAkac9/kor-mur-design?node-id=19-3">
                  Color palette
                </a>
              </li>
            </ul>
          </details>
        </td>
      </tr>
      <tr>
        <td>
          <a href="https://www.atlassian.com/software/jira" target="_blank">
            <img
              height="32"
              width="32"
              src="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/jira/jira-original.svg"
              alt="Jira"
            />
          </a>
        </td>
        <td>Jira</td>
        <td>project management and maintenance</td>
      </tr>
      <tr>
        <td>
          <a href="https://jestjs.io/" target="_blank">
            <img
              height="32"
              width="32"
              src="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/jest/jest-plain.svg"
              alt="Jest"
            />
          </a>
        </td>
        <td>Jest</td>
        <td>code testing and quality assurance</td>
      </tr>
      <tr>
        <td>
          <a href="https://testing-library.com/" target="_blank">
            <img
              height="32"
              width="32"
              src="https://testing-library.com/img/octopus-128x128.png"
              alt="Testing Library"
            />
          </a>
        </td>
        <td>Testing Library</td>
        <td>code testing and quality assurance</td>
      </tr>
      <tr>
        <td>
          <a href="https://eslint.org/" target="_blank">
            <img
              height="32"
              width="32"
              src="https://www.svgrepo.com/show/353709/eslint.svg"
              alt="ESlint"
            />
          </a>
        </td>
        <td>ESLint</td>
        <td>code linting</td>
      </tr>
      <tr>
        <td>
          <a href="https://prettier.io/" target="_blank">
            <img
              height="32"
              width="32"
              src="https://www.svgrepo.com/show/354208/prettier.svg"
              alt="Prettier"
            />
          </a>
        </td>
        <td>Prettier</td>
        <td>code formatting</td>
      </tr>
      <tr>
        <td>
          <a href="https://stylelint.io/" target="_blank">
            <img
              height="32"
              width="32"
              src="https://www.svgrepo.com/show/354405/stylelint.svg"
              alt="Stylelint"
            />
          </a>
        </td>
        <td>Stylelint</td>
        <td>code formatting</td>
      </tr>
      <tr>
        <td>
          <a href="https://www.apollographql.com/" target="_blank">
            <img
              height="32"
              width="32"
              src="https://www.svgrepo.com/show/305728/apollographql.svg"
              alt="Apollo GraphQL"
            />
          </a>
        </td>
        <td>Apollo</td>
        <td>GraphQL client</td>
      </tr>
      <tr>
        <td>
          <a href="https://www.framer.com/motion/" target="_blank">
            <img
              height="32"
              width="32"
              src="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/framermotion/framermotion-original.svg"
              alt="Framer Motion"
            />
          </a>
        </td>
        <td>Framer Motion</td>
        <td>animations</td>
      </tr>
      <tr>
        <td>
          <a href="https://ngrok.com/" target="_blank">
            <img
              height="32"
              width="32"
              src="https://assets-global.website-files.com/63ed4bc7a4b189da942a6b8c/6411ffa0b395a44345ed2b1a_Frame%201.svg"
              alt="ngrok"
            />
          </a>
        </td>
        <td>ngrok</td>
        <td>local environment tunneling and webhook testing</td>
      </tr>
      <tr>
        <td>
          <a href="https://sendgrid.com/" target="_blank">
            <img
              height="32"
              width="32"
              src="https://sendgrid.com/content/dam/sendgrid/global/en/7_company/brand/Twilio-Logo-Product-SendGrid-Icon-RGB%201.png/_jcr_content/renditions/compressed-original.webp"
              alt="SendGrid"
            />
          </a>
        </td>
        <td>SendGrid</td>
        <td>email service</td>
      </tr>
    </tbody>

  </table>
</details>

## Features

<details>
  <summary>Integration with Sanity headless CMS.</summary>

To minimize the developer interference in adding and managing new content on the page, and to give the user a clear and easy way to do that on his own, Sanity CMS was used.

The user has an administration panel under the `/studio` path in which he can manage content on the page such as projects, assets, etc.

[Sanity CMS integration](https://github.com/842u/kor-mur/assets/23544888/1cbdaa91-a68c-4c90-9d7b-55e5c49a19f4)

<video controls>
  <source
    src="https://github.com/842u/kor-mur/assets/23544888/1cbdaa91-a68c-4c90-9d7b-55e5c49a19f4"
    type="video/webm"
  />
</video>

</details>

<details>
  <summary>Live content drafts preview.</summary>

The user can see how content changes will look without the need to deploy those to production.

This can be done inside the studio.

[Live drafts preview - studio](https://github.com/842u/kor-mur/assets/23544888/552a3bd8-fab6-4e59-832a-b42c32ec9de9)

<video controls>
  <source
    src="https://github.com/842u/kor-mur/assets/23544888/552a3bd8-fab6-4e59-832a-b42c32ec9de9"
    type="video/webm"
  />
</video>

Or just by hitting the `/api/enable-draft` endpoint.

[Live drafts preview - API](https://github.com/842u/kor-mur/assets/23544888/b7955cd6-6c78-438b-a051-9efba73dcd29)

<video controls>
  <source
    src="https://github.com/842u/kor-mur/assets/23544888/b7955cd6-6c78-438b-a051-9efba73dcd29"
    type="video/webm"
  />
</video>

</details>

<details>
  <summary>Pages revalidation on CMS content change.</summary>

To not have to deploy the whole application every time content changes, and to ensure site performance, there is integration with Sanity webhooks.

When content changes, webhook will send info payload to the `/api/revalidate` endpoint, and then the server will generate necessary, new static files with fresh data.

</details>

## Setup

- Clone the repository:
  ```bash
  git clone https://github.com/842u/kor-mur.git
  ```
- Install dependencies:
  ```bash
  npm install
  ```
- To run development environment:
  ```bash
  npm run dev
  ```
- To run production environment:
  ```bash
  npm run build
  npm run start
  ```

At this point running app will contain placeholders instead of real data from CMS and will not have all of its functionality.

To enable all features you will have to:

- Create a Sanity account with a new project to use it as CMS and to enable On-Demand revalidation.
- Create a Sendgrid account to be able to receive emails.
- Complete .env file with your API keys.

<details>
  <summary>Sanity CMS setup</summary>

- Create "production" and "development" datasets in your Sanity project.
- Complete .env with the dataset name you want to use.
- Complete .env with your Sanity project ID.
- Complete .env with your Sanity GraphQL endpoint for your project.

  `https://<yourProjectId>.api.sanity.io/v1/graphql/<dataset>/default`

- Deploy GraphQL API:

  ```bash
  npx sanity graphql deploy
  ```

- Add your hosts to CORS origins in Sanity project.

  e.g. `http://localhost:3000` for development

  e.g. `https://www.your.domain` for production

- Enter studio to add content.

  e.g. `http://localhost:3000/studio`

</details>

<details>
  <summary>On-Demand revalidation setup</summary>

To be able to revalidate routes in production on content change you will have to set up Sanity webhooks.

- Create a new webhook in Sanity project.
- Add the URL to the revalidation api endpoint.

  e.g. `https://www.your.domain/api/revalidate`

- Select "production" dataset.
- Select webhook trigger on Create, Update, Delete.
- Set Filter to:
  ```
  _type in ['heroSectionSettings', 'mottoSectionSettings', 'featuredProjectsSectionSettings', 'contactSectionSettings', 'aboutSectionSettings', 'tag', 'project']
  ```
- Set Projection to:
  ```
  {
  _type,
  _id,
  "operationType": delta::operation(),
  "projectSlug": slug.current,
  "tagsSlugsBefore": before().tags[]->slug.current,
  "tagsSlugsAfter": after().tags[]->slug.current,
  }
  ```
- Create a secret for webhook and add it to your .env.

</details>

<details>
  <summary>SendGrid setup</summary>

- Authenticate your Sender Identity on SendGrid.
- Complete .env with your SendGrid Sender email.
- Complete .env with recipent email.

</details>

## License

Code is under GNU GPLv3 license, except private personal assets on [murawska.studio](https://www.murawska.studio/).
